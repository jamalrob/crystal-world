{% for img in images %}
  <li>
    <a
      href="javascript:void(0)"
      class="imglink"
      data-filename="{{ img.name }}"
      data-fileid="{{ img.fileId }}"
      _=" on click
            set templateid to 'bigimg_' + me.dataset.fileid
            put #{templateid}.innerHTML into .modal-inner
            add .visible to .modal-container
        "
    >
      <!-- Preload big image -->
      <link rel="preload" as="image" href="https://ik.imagekit.io/alistairrobinson/blog/tr:w-960,q-80/{{ img.name }}" />

      <!-- Temp store for the big image HTML, used by hyperscript click handler above -->
      <template id="bigimg_{{ img.fileId }}">
        <img src="https://ik.imagekit.io/alistairrobinson/blog/tr:w-960,q-80/{{ img.name }}">
      </template>

      <!-- The thumbnail -->
      <img src="https://ik.imagekit.io/alistairrobinson/blog/tr:w-150,q-66/{{ img.name }}" loading="lazy" decoding="async">
    </a>
    <button
      class="copymd icon"
      title="Copy markdown link"
      data-url="https://ik.imagekit.io/alistairrobinson/blog/{{ img.name }}"
      _=" on click
          set url to me.dataset.url
          set md to `![alt text](${url})`
          call navigator.clipboard.writeText(md)
          log 'Copied'
      "
    >
      <svg data-url="{{ img.url }}" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
    </button>
  </li>
{% endfor %}