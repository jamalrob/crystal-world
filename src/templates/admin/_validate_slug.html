<div hx-target="this" hx-swap="outerHTML" {% if error %}{% if error.show_as_error %}class="error"{% endif %}{% endif %}>
  <label for="inpSlug">
    Slug
    <span class="autosaved hidden">âœ” Autosaved</span>
  </label>
  <input
    type="text"
    data-articleid="{{ article_id }}"
    hx-post="/admin/validate_slug"
    hx-trigger="changed, blur"
    name="slug"
    id="inpSlug"
    value="{{ value }}"
  >
  <!-- _="on input call doAutosave(event.target)" -->
  {% if error %}<div class='{% if error.show_as_error %}error-message{% endif %} small'>{{ error.message }}</div>{% endif %}
</div>
<script>
  var inp = document.getElementById("inpSlug")
  var articleId = inp.dataset.articleid
  var newValue = inp.value
  var localSlug = localStorage.getItem(`article_${articleId}_slug`)

  if (newValue !== localSlug) {
    a.events.autosave(inp);
  }

  inp.addEventListener("input, changed", function(){
    a.events.autosave(inp);
  })
</script>